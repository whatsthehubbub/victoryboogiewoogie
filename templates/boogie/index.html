{% extends "base.html" %}
{% load url from future %}
{% load typogrify_tags %}

{% block pagetitle %}Home{% endblock pagetitle %}

{% block sidebar %}
	{% if summary %}
	<div id="summary" class="clearfix">
		<a href="{{ summary.0.get_absolute_url }}">
			<p class="lead"><em>Het verhaal tot nu toe:</em> {{ summary.0.content|striptags|truncatewords_html:36|typogrify }}</p>
		</a>
	</div>
	{% endif %}
{% endblock sidebar %}

{% block content %}
<div id="home-latest">
	<div id="itemlist" class="row">
		
		{% for piece_or_ad in piece_and_ads %}
			
			{% ifequal piece_or_ad.0 'piece' %} 
				{% with piece_or_ad.1 as piece %}
				    {% include "boogie/piece_fragment.html" %}
				{% endwith %}
			{% else %}
				{% with piece_or_ad.1 as ad %}
		    		<article class="span4 advertentie clearfix">
						<a href="{{ ad.url }}">
							<div class="box">
								<div class="meta clearfix">
									<p class="genre pull-left">Advertentie</p>
								</div>
								<img src="{{ ad.image.url }}" alt="{{ ad.sender }}">
							</div>
						</a>
						<div class="info">
							<p class="pull-right">van <a href="{{ ad.url }}">{{ ad.sender }}</a></p>
						</div>
					</article>
				{% endwith %}
			{% endifequal %}

		{% endfor %}
	</div>
</div>

<div id="home-characters">
	<h2 class="text-center">De personages</h2>
	<div id="characterlist" class="row">
		{% for character in characters %}
		<div class="span3">
			<a href="{% url 'character_profile' character.id %}">
				{% if character.avatar %}
					<img src="{{ character.avatar.url }}" alt="{{ character.name }}">
				{% endif %}
				<h4 class="text-center">{{ character.name }}</h4>
			</a>
		</div>
		{% endfor %}
	</div>
</div>

<p>Ads ordered by priority:</p>

{% for ad in ads %}
	<p>{{ ad.rank }} {{ ad.url }} {{ ad.image.url }} {{ ad.sender }}</p>
{% endfor %}

<p>Pieces for characters:</p>

{% for piece in character_pieces %}
	<p>{{ piece }}</p>
{% endfor %}

<p>Pieces for topics:</p>

{% for piece in topic_pieces %}
	<p>{{ piece }}</p>
{% endfor %}

<p>Topics for non-character pieces (max 10)</p>

{% for topic in topics %}
	{{ topic }}
{% endfor %}

<p>Players with a piece published</p>

{% for player in players_published %}
	{{ player }}
{% endfor %}

<p>Writers with a piece published</p>

{% for player in writers_published %}
	{{ player }}
{% endfor %}

{% endblock %}